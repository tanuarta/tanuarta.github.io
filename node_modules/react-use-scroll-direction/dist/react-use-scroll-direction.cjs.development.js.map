{"version":3,"file":"react-use-scroll-direction.cjs.development.js","sources":["../src/domUtils.ts","../src/useScrollDirection.ts"],"sourcesContent":["type ListenerFn = () => any\n\nexport function getScrollTop(target?: HTMLElement) {\n  if (target) return target.scrollTop\n  return (\n    window.scrollY ||\n    window.pageYOffset ||\n    document.body.scrollTop ||\n    (document.documentElement && document.documentElement.scrollTop) ||\n    0\n  )\n}\n\nexport function getScrollLeft(target?: HTMLElement) {\n  if (target) return target.scrollLeft\n  return (\n    window.scrollX ||\n    window.pageXOffset ||\n    document.body.scrollLeft ||\n    (document.documentElement && document.documentElement.scrollLeft) ||\n    0\n  )\n}\n\nexport function isBrowser() {\n  return typeof window === 'object'\n}\n\nexport function addScrollListener(listener: ListenerFn, target: HTMLElement | Document = document) {\n  return target.addEventListener('scroll', listener)\n}\n\nexport function removeScrollListener(\n  listener: ListenerFn,\n  target: HTMLElement | Document = document\n) {\n  return target.removeEventListener('scroll', listener)\n}\n","import { useCallback, useEffect, useState } from 'react'\nimport {\n  isBrowser,\n  getScrollTop,\n  getScrollLeft,\n  addScrollListener,\n  removeScrollListener,\n} from './domUtils'\n\nexport type ScrollDirection = 'UP' | 'DOWN' | 'LEFT' | 'RIGHT' | null\n\nexport interface ScrollDirectionHookResult {\n  isScrolling: boolean\n  isScrollingX: boolean\n  isScrollingY: boolean\n  isScrollingUp: boolean\n  isScrollingDown: boolean\n  isScrollingLeft: boolean\n  isScrollingRight: boolean\n  scrollDirection: ScrollDirection\n  scrollTargetRef: (node: HTMLElement) => void\n}\n\nexport function useScrollDirection(target?: HTMLElement): ScrollDirectionHookResult {\n  const [targetFromApi, setTargetFromApi] = useState<HTMLElement | undefined>()\n  const [targetFromProps, setTargetFromProps] = useState<HTMLElement | undefined>()\n  const [scrollDirection, setScrollDirection] = useState<ScrollDirection>(null)\n  const targetToUse = targetFromProps || targetFromApi\n\n  const isScrolling = scrollDirection !== null\n  const isScrollingX = scrollDirection === 'LEFT' || scrollDirection === 'RIGHT'\n  const isScrollingY = scrollDirection === 'UP' || scrollDirection === 'DOWN'\n  const isScrollingUp = scrollDirection === 'UP'\n  const isScrollingDown = scrollDirection === 'DOWN'\n  const isScrollingLeft = scrollDirection === 'LEFT'\n  const isScrollingRight = scrollDirection === 'RIGHT'\n\n  const scrollTargetRef = useCallback((node: HTMLElement) => {\n    setTargetFromApi(node)\n  }, [])\n\n  useEffect(() => {\n    setTargetFromProps(target)\n  }, [target])\n\n  useEffect(() => {\n    if (isBrowser()) {\n      let scrollTimeout: number\n      let lastScrollTop = getScrollTop(targetToUse)\n      let lastScrollLeft = getScrollLeft(targetToUse)\n\n      const handleScroll = () => {\n        // Reset scroll direction when scrolling stops\n        window.clearTimeout(scrollTimeout)\n        scrollTimeout = window.setTimeout(() => {\n          setScrollDirection(null)\n        }, 66)\n\n        // Set vertical direction while scrolling\n        const scrollTop = getScrollTop(targetToUse)\n        if (scrollTop > lastScrollTop) {\n          setScrollDirection('DOWN')\n        } else if (scrollTop < lastScrollTop) {\n          setScrollDirection('UP')\n        }\n        lastScrollTop = scrollTop\n\n        // Set horizontal scroll direction\n        const scrollLeft = getScrollLeft(targetToUse)\n        if (scrollLeft > lastScrollLeft) {\n          setScrollDirection('RIGHT')\n        } else if (scrollLeft < lastScrollLeft) {\n          setScrollDirection('LEFT')\n        }\n        lastScrollLeft = scrollLeft\n      }\n\n      addScrollListener(handleScroll, targetToUse)\n      return () => removeScrollListener(handleScroll, targetToUse)\n    }\n  }, [targetToUse])\n\n  return {\n    isScrolling,\n    isScrollingX,\n    isScrollingY,\n    isScrollingUp,\n    isScrollingDown,\n    isScrollingLeft,\n    isScrollingRight,\n    scrollDirection,\n    scrollTargetRef,\n  }\n}\n"],"names":["getScrollTop","target","scrollTop","window","scrollY","pageYOffset","document","body","documentElement","getScrollLeft","scrollLeft","scrollX","pageXOffset","isBrowser","addScrollListener","listener","addEventListener","removeScrollListener","removeEventListener","useScrollDirection","useState","targetFromApi","setTargetFromApi","targetFromProps","setTargetFromProps","scrollDirection","setScrollDirection","targetToUse","isScrolling","isScrollingX","isScrollingY","isScrollingUp","isScrollingDown","isScrollingLeft","isScrollingRight","scrollTargetRef","useCallback","node","useEffect","scrollTimeout","lastScrollTop","lastScrollLeft","handleScroll","clearTimeout","setTimeout"],"mappings":"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"}